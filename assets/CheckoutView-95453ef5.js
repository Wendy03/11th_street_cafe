import{T as h}from"./Toast-84ebfb05.js";import{_ as C,R as L,r as I,o as i,c as d,a as t,F as u,e as p,n as T,s as V,x as E,t as o,u as O,b as m,w as x,d as v,m as N,f as P,q as A}from"./index-77aa52f3.js";import{c as k}from"./cartStore-52d74198.js";import"./statusStore-089fa6fe.js";const{VITE_API:w,VITE_PATH:$}={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"coffee11",BASE_URL:"/11th_street_cafe/",MODE:"production",DEV:!1,PROD:!0},S={data(){return{order:{products:[],user:{}},orderId:"",isLoading:!1,isProcessing:!1}},components:{RouterLink:L},methods:{getOrder(){this.isLoading=!0,this.$http.get(`${w}/api/${$}/order/${this.orderId}`).then(e=>{this.isLoading=!1;const{order:r}=e.data;this.order=r}).catch(e=>{var c,a;const r=((a=(c=e.response)==null?void 0:c.data)==null?void 0:a.message)||"資料錯誤";this.isLoading=!1,h.fire({title:`${r}`,icon:"error"})})},payOrder(){this.isLoading=!0,this.$http.post(`${w}/api/${$}/pay/${this.orderId}`).then(()=>{this.isLoading=!1,this.getOrder(),h.fire({title:"付款成功",icon:"success"})}).catch(e=>{var c,a;const r=((a=(c=e.response)==null?void 0:c.data)==null?void 0:a.message)||"資料錯誤";this.isLoading=!1,h.fire({title:`${r}`,icon:"error"})})}},mounted(){this.orderId=this.$route.params.orderId,this.getOrder()}},R={class:"col-md-6"},j={key:0,class:"mb-4 fw-bolder"},B=t("p",null,"差一步完成訂單，點選確認付款完成訂單",-1),D=t("h2",{class:"mb-4 fw-bolder"},"付款完成",-1),M=t("div",{class:"mt-4"},[t("h5",null,"感謝訂購")],-1),z=t("p",null,"對於咖啡豆品質要求，收到訂單開始製作， 大約 1 ~ 2天出貨",-1),q=t("div",{style:{height:"300px","background-size":"cover","background-position":"center","background-image":"url('https://images.unsplash.com/photo-1495774856032-8b90bbb32b32?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1050&q=80')"}},null,-1),H={class:"col-md-6"},F={class:"card rounded-0 py-4 mb-3"},U=t("div",{class:"card-header border-bottom-0 bg-white px-4 py-0"},[t("h2",null,"訂單資訊")],-1),J={class:"card-body px-4 py-0"},Q={class:"list-group list-group-flush"},W={class:"d-flex mt-2"},G={class:"w-100 d-flex flex-column"},K={class:"d-flex justify-content-between fw-bold"},X={class:"mb-0"},Y={class:"d-flex justify-content-between mt-auto"},Z={class:"text-muted mb-0"},tt={class:"mb-0"},st={class:"list-group-item px-0 pb-0"},et=t("table",{class:"table text-muted"},[t("tbody",null,[t("tr",null,[t("th",{scope:"row",class:"border-0 px-0 pt-0 font-weight-normal"}," Payment "),t("td",{class:"text-end border-0 px-0 pt-0"},"ApplePay")])])],-1),ot={class:"d-flex justify-content-between mt-2"},rt=t("p",{class:"mb-0 h4 fw-bold"},"總計",-1),it={class:"mb-0 h4 fw-bold"},dt={class:"card rounded-0 py-4"},nt={class:"table"},ct=t("th",{width:"100"},"Email",-1),at=t("th",null,"姓名",-1),lt=t("th",null,"收件人電話",-1),ut=t("th",null,"收件人地址",-1),_t=t("th",null,"付款狀態",-1),ht={key:0,class:"d-flex mt-4 justify-content-between align-items-md-center align-items-end w-100"},pt=t("button",{type:"submit",class:"btn btn-dark"},"確認付款",-1),mt={key:0,class:"text-end"};function bt(e,r,c,a,s,_){const l=I("RouterLink");return i(),d(u,null,[t("div",R,[s.order.is_paid===!1?(i(),d(u,{key:0},[s.order.is_paid===!1?(i(),d("h2",j,"付款")):p("",!0),B],64)):(i(),d(u,{key:1},[D,M],64)),z,q]),t("div",H,[t("form",{onSubmit:r[0]||(r[0]=T((...n)=>_.payOrder&&_.payOrder(...n),["prevent"]))},[t("div",F,[U,t("div",J,[t("ul",Q,[(i(!0),d(u,null,V(s.order.products,n=>{var b,f,g,y;return i(),d("li",{key:n.id,class:"list-group-item px-0"},[t("div",W,[t("div",{style:E([{width:"65px","max-height":"60px","background-size":"cover","background-position":"center"},{backgroundImage:`url(${(b=n.product)==null?void 0:b.imageUrl})`}]),class:"rounded-0 me-3"},null,4),t("div",G,[t("div",K,[t("h5",null,o((f=n.product)==null?void 0:f.title),1),t("p",X,"x"+o(n.qty),1)]),t("div",Y,[t("p",Z,[t("small",null," NT$"+o(e.$filters.currency((g=n.product)==null?void 0:g.price)),1)]),t("p",tt," NT$"+o(e.$filters.currency((y=n.product)==null?void 0:y.price)),1)])])])])}),128)),t("li",st,[et,t("div",ot,[rt,t("p",it," NT$"+o(e.$filters.currency(s.order.total)),1)])])])])]),t("div",dt,[t("table",nt,[t("tbody",null,[t("tr",null,[ct,t("td",null,o(s.order.user.email),1)]),t("tr",null,[at,t("td",null,o(s.order.user.name),1)]),t("tr",null,[lt,t("td",null,o(s.order.user.tel),1)]),t("tr",null,[ut,t("td",null,o(s.order.user.address),1)]),t("tr",null,[_t,t("td",null,[t("span",{class:O({"text-success":s.order.is_paid})},o(s.order.is_paid?"付款完成":"尚未付款"),3)])])])])]),s.order.is_paid===!1?(i(),d("div",ht,[m(l,{to:"/",class:"btn btn-primary"},{default:x(()=>[v(" 回首頁 ")]),_:1}),pt])):p("",!0)],32),s.order.is_paid?(i(),d("div",mt,[m(l,{to:"/",class:"btn btn-dark me-2 my-4"},{default:x(()=>[v(" 回首頁 ")]),_:1})])):p("",!0)])],64)}const ft=C(S,[["render",bt]]),gt={data(){return{}},components:{CheckoutCard:ft},methods:{...N(k,["getCarts"])},computed:{...P(k,["cart"])},mounted(){this.getCarts()}},yt={class:"container my-12"},xt=A('<div class="mt-13"><nav aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item text-gray">購物車</li><li class="breadcrumb-item text-gray">訂單資訊</li><li class="breadcrumb-item text-dark active" aria-current="page"> 結帳 </li></ol></nav></div>',1),vt={class:"row py-7"};function kt(e,r,c,a,s,_){const l=I("CheckoutCard");return i(),d("div",yt,[xt,t("div",vt,[m(l)])])}const Lt=C(gt,[["render",kt]]);export{Lt as default};
