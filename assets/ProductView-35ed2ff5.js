import{c as T}from"./cartStore-62e4ae02.js";import{p as f,f as k}from"./productsStore-e9c36489.js";import{s as C}from"./statusStore-d8eb7628.js";import{T as S}from"./Toast-37648567.js";import{R as D,m as h,e as m,_ as L,r as v,o as i,c,b,a as t,w as E,d as P,t as n,l as w,s as I,F as l,p as g,g as a,k as R,u as U}from"./index-26d26e98.js";const{VITE_API:x,VITE_PATH:A}={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"coffee11",BASE_URL:"/11th_street_cafe/",MODE:"production",DEV:!1,PROD:!0},q={data(){return{id:"",product:{},relativeProduct:[],qty:1,isProcessing:!1,isLoading:!1}},components:{RouterLink:D},methods:{...h(f,["getProducts"]),...h(T,["addToCart"]),...h(k,["getFollows","toggleFollow"]),getProduct(){this.isLoading=!0,this.$http.get(`${x}/api/${A}/product/${this.id}`).then(s=>{this.isLoading=!1;const{product:r}=s.data;this.product=r,this.getRelative()}).catch(s=>{var d,u;const r=((u=(d=s.response)==null?void 0:d.data)==null?void 0:u.message)||"資料錯誤";this.isLoading=!1,S.fire({title:`${r}`,icon:"error"})})},getRelative(){const{category:s,id:r}=this.product;this.relativeProduct=this.products.filter(d=>d.category===s&&d.id!==r)},toggleId(s){this.$router.push(`/product/${s}`),this.id=s,this.getProduct()}},computed:{...m(C,["loadingItem"]),...m(f,["products"]),...m(k,["followIds"])},created(){const{id:s}=this.$route.params;this.id=s,this.getProducts()},mounted(){this.getProduct()}},F={key:0,class:"pb-9"},B={"aria-label":"breadcrumb mt-5"},M={class:"breadcrumb"},N={class:"breadcrumb-item"},z={class:"breadcrumb-item active","aria-current":"page"},O={class:"mb-3"},H={class:"row"},j={class:"col-sm-5"},G={key:0,class:"bi bi-heart text-danger shadow-sm p-1 bg-secondary"},J={key:1,class:"bi bi-heart-fill text-danger shadow-sm p-1 bg-secondary"},K={key:0,class:"row"},Q={class:"col-3"},W=["src","alt"],X={class:"col-sm-7"},Y={class:"badge bg-primary rounded-pill mt-md-0 mt-5"},Z={class:"mt-mb-0 mt-3"},$={key:0},tt={key:1},ot=t("li",null,"熟豆重量：227g ± 2g",-1),et=t("li",null,"保存期限：30 天",-1),st={class:"h5"},rt={class:"input-group mt-5 w-75"},it=["value"],ct={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},nt=t("hr",null,null,-1),dt=t("h3",{class:"my-7"},"相關商品",-1),lt={class:"row"},at={class:"card h-100"},ut=["onClick"],pt={class:"card-body"},_t={class:"card-title"},ht={class:"text-right pr-2"};function mt(s,r,d,u,o,y){const p=v("VueLoading"),V=v("RouterLink");return i(),c(l,null,[b(p,{active:o.isLoading,"onUpdate:active":r[0]||(r[0]=e=>o.isLoading=e)},null,8,["active"]),o.product.imageUrl?(i(),c("div",F,[t("nav",B,[t("ol",M,[t("li",N,[b(V,{to:"/products"},{default:E(()=>[P("全部商品")]),_:1})]),t("li",z,n(o.product.title),1)])]),t("h2",O,n(o.product.title),1),t("div",H,[t("div",j,[t("div",{class:"position-absolute heart-icon mt-1 ps-1",style:{cursor:"pointer"},onClick:r[1]||(r[1]=w(e=>s.toggleFollow(o.product.id),["prevent"]))},[s.followIds.indexOf(o.product.id)===-1?(i(),c("i",G)):(i(),c("i",J))]),t("div",{style:I([{"min-height":"50vh","background-size":"cover","background-position":"center"},{backgroundImage:`url(${o.product.imageUrl})`}])},null,4),(i(!0),c(l,null,g(o.product.imagesUrl,(e,_)=>(i(),c(l,{key:_+"img"},[e?(i(),c("div",K,[t("div",Q,[t("img",{src:e,alt:_+"img",class:"card-image mt-2 w-100"},null,8,W)])])):a("",!0)],64))),128))]),t("div",X,[t("span",Y,n(o.product.category),1),t("p",Z,"商品描述："+n(o.product.description),1),o.product.content?(i(),c("p",$,"商品內容："+n(o.product.content),1)):a("",!0),o.product.category!=="周邊商品"?(i(),c("ul",tt,[t("li",null,"產地："+n(o.product.country),1),t("li",null,"產區："+n(o.product.area),1),t("li",null,"處理方法："+n(o.product.production),1),ot,et])):a("",!0),t("div",st,n(s.$filters.currency(o.product.price))+" 元 / "+n(o.product.unit),1),t("div",rt,[R(t("select",{class:"form-select",name:"qty","onUpdate:modelValue":r[2]||(r[2]=e=>o.qty=e)},[(i(),c(l,null,g(5,e=>t("option",{value:e,key:e+"num"},n(e),9,it)),64))],512),[[U,o.qty,void 0,{number:!0}]]),t("button",{type:"button",class:"btn btn-primary",onClick:r[3]||(r[3]=e=>s.addToCart(o.product.id,o.qty))},[o.product.id===s.loadingItem?(i(),c("span",ct)):a("",!0),P(" 加入購物車 ")])])])])])):a("",!0),nt,o.relativeProduct.length?(i(),c(l,{key:1},[dt,t("div",lt,[(i(!0),c(l,null,g(o.relativeProduct,e=>(i(),c("div",{key:e.id,class:"col-lg-3 col-md-6 mb-0 mb-2"},[t("div",at,[t("div",{style:I([{"min-height":"200px","background-size":"cover","background-position":"center",cursor:"pointer"},{backgroundImage:`url(${e.imageUrl})`}]),onClick:w(_=>y.toggleId(e.id),["prevent"])},null,12,ut),t("div",pt,[t("h6",_t,n(e.title),1),t("div",ht,n(e.price)+" 元",1)])])]))),128))])],64)):a("",!0)],64)}const gt=L(q,[["render",mt]]),vt={data(){return{}},components:{ProductDetail:gt}},bt={class:"container my-12"};function yt(s,r,d,u,o,y){const p=v("ProductDetail");return i(),c("div",bt,[b(p)])}const Lt=L(vt,[["render",yt]]);export{Lt as default};
