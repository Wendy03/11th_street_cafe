import{I as T}from"./InformationCard-5722c56b.js";import{c as S}from"./cartStore-b3eb4093.js";import{p as y,f as k}from"./productsStore-ea8c54a5.js";import{s as D}from"./statusStore-08f0d806.js";import{T as E}from"./Toast-0995bd9d.js";import{R,m as g,e as v,_ as L,r as p,o as i,c,b as _,a as t,w as U,d as P,t as n,l as w,s as I,F as l,p as b,f as a,k as x,u as A}from"./index-f5198bfb.js";const{VITE_API:q,VITE_PATH:F}={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"coffee11",BASE_URL:"/11th_street_cafe/",MODE:"production",DEV:!1,PROD:!0},B={data(){return{id:"",product:{},relativeProduct:[],qty:1,isProcessing:!1,isLoading:!1}},components:{RouterLink:R,InformationCard:T},methods:{...g(y,["getProducts"]),...g(S,["addToCart"]),...g(k,["getFollows","toggleFollow"]),getProduct(){this.isLoading=!0,this.$http.get(`${q}/api/${F}/product/${this.id}`).then(e=>{this.isLoading=!1;const{product:r}=e.data;this.product=r,this.getRelative()}).catch(e=>{var d,u;const r=((u=(d=e.response)==null?void 0:d.data)==null?void 0:u.message)||"資料錯誤";this.isLoading=!1,E.fire({title:`${r}`,icon:"error"})})},getRelative(){const{category:e,id:r}=this.product;this.relativeProduct=this.products.filter(d=>d.category===e&&d.id!==r)},toggleId(e){this.$router.push(`/product/${e}`),this.id=e,this.getProduct()}},computed:{...v(D,["loadingItem"]),...v(y,["products"]),...v(k,["followIds"])},created(){const{id:e}=this.$route.params;this.id=e,this.getProducts()},mounted(){this.getProduct()}},M={key:0,class:"pb-9"},N={"aria-label":"breadcrumb mt-5"},z={class:"breadcrumb"},O={class:"breadcrumb-item"},H={class:"breadcrumb-item active","aria-current":"page"},j={class:"mb-3"},G={class:"row"},J={class:"col-sm-5"},K={key:0,class:"bi bi-heart text-danger shadow-sm p-1 bg-secondary"},Q={key:1,class:"bi bi-heart-fill text-danger shadow-sm p-1 bg-secondary"},W={key:0,class:"row"},X={class:"col-3"},Y=["src","alt"],Z={class:"col-sm-7"},$={class:"badge bg-primary rounded-pill mt-md-0 mt-5"},tt={class:"mt-mb-0 mt-3"},ot={key:0},st={key:1},et=t("li",null,"熟豆重量：227g ± 2g",-1),rt=t("li",null,"保存期限：30 天",-1),it={class:"h5"},ct={class:"input-group mt-5 w-75"},nt=["value"],dt={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},lt=t("hr",null,null,-1),at={class:"my-7"},ut=t("hr",null,null,-1),pt=t("h3",{class:"my-7"},"相關商品",-1),_t={class:"row"},ht={class:"card h-100"},mt=["onClick"],gt={class:"card-body"},vt={class:"card-title"},bt={class:"text-right pr-2"};function ft(e,r,d,u,o,f){const h=p("VueLoading"),V=p("RouterLink"),C=p("InformationCard");return i(),c(l,null,[_(h,{active:o.isLoading,"onUpdate:active":r[0]||(r[0]=s=>o.isLoading=s)},null,8,["active"]),o.product.imageUrl?(i(),c("div",M,[t("nav",N,[t("ol",z,[t("li",O,[_(V,{to:"/products"},{default:U(()=>[P("全部商品")]),_:1})]),t("li",H,n(o.product.title),1)])]),t("h2",j,n(o.product.title),1),t("div",G,[t("div",J,[t("div",{class:"position-absolute heart-icon mt-1 ps-1",style:{cursor:"pointer"},onClick:r[1]||(r[1]=w(s=>e.toggleFollow(o.product.id),["prevent"]))},[e.followIds.indexOf(o.product.id)===-1?(i(),c("i",K)):(i(),c("i",Q))]),t("div",{style:I([{"min-height":"50vh","background-size":"cover","background-position":"center"},{backgroundImage:`url(${o.product.imageUrl})`}])},null,4),(i(!0),c(l,null,b(o.product.imagesUrl,(s,m)=>(i(),c(l,{key:m+"img"},[s?(i(),c("div",W,[t("div",X,[t("img",{src:s,alt:m+"img",class:"card-image mt-2 w-100"},null,8,Y)])])):a("",!0)],64))),128))]),t("div",Z,[t("span",$,n(o.product.category),1),t("p",tt,"商品描述："+n(o.product.description),1),o.product.content?(i(),c("p",ot,"商品內容："+n(o.product.content),1)):a("",!0),o.product.category!=="周邊商品"?(i(),c("ul",st,[t("li",null,"產地："+n(o.product.country),1),t("li",null,"產區："+n(o.product.area),1),t("li",null,"處理方法："+n(o.product.production),1),et,rt])):a("",!0),t("div",it,n(e.$filters.currency(o.product.price))+" 元 / "+n(o.product.unit),1),t("div",ct,[x(t("select",{class:"form-select",name:"qty","onUpdate:modelValue":r[2]||(r[2]=s=>o.qty=s)},[(i(),c(l,null,b(5,s=>t("option",{value:s,key:s+"num"},n(s),9,nt)),64))],512),[[A,o.qty,void 0,{number:!0}]]),t("button",{type:"button",class:"btn btn-primary",onClick:r[3]||(r[3]=s=>e.addToCart(o.product.id,o.qty))},[o.product.id===e.loadingItem?(i(),c("span",dt)):a("",!0),P(" 加入購物車 ")])])])])])):a("",!0),lt,t("div",at,[_(C)]),ut,o.relativeProduct.length?(i(),c(l,{key:1},[pt,t("div",_t,[(i(!0),c(l,null,b(o.relativeProduct,s=>(i(),c("div",{key:s.id,class:"col-lg-3 col-md-6 mb-0 mb-2"},[t("div",ht,[t("div",{style:I([{"min-height":"200px","background-size":"cover","background-position":"center",cursor:"pointer"},{backgroundImage:`url(${s.imageUrl})`}]),onClick:w(m=>f.toggleId(s.id),["prevent"])},null,12,mt),t("div",gt,[t("h6",vt,n(s.title),1),t("div",bt,n(s.price)+" 元",1)])])]))),128))])],64)):a("",!0)],64)}const yt=L(B,[["render",ft]]),kt={data(){return{}},components:{ProductDetail:yt}},Pt={class:"container my-13"};function wt(e,r,d,u,o,f){const h=p("ProductDetail");return i(),c("div",Pt,[_(h)])}const Dt=L(kt,[["render",wt]]);export{Dt as default};
