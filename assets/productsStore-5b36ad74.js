import{T as r}from"./Toast-c391ac49.js";import{g as i,h as c}from"./index-362d0565.js";import{s as a}from"./statusStore-12ca3353.js";const f=i("follows",{state:()=>({followList:[],followIds:[],products:[]}),actions:{tempProducts(o){this.products=o,this.getFollows()},getFollowIds(){this.followIds=JSON.parse(localStorage.getItem("followIds"))||[]},getFollows(){this.getFollowIds(),this.followList=[],this.products.forEach(o=>{this.followIds.indexOf(o.id)>-1&&this.followList.push(o)})},toggleFollow(o){const t=this.followIds.indexOf(o);t===-1?(this.followIds.push(o),r.fire({title:"已加入追蹤",icon:"success"})):(this.followIds.splice(t,1),r.fire({title:"已取消追蹤",icon:"success"})),localStorage.setItem("followIds",JSON.stringify(this.followIds)),this.getFollows()}}}),e=a(),d=f(),{VITE_API:g,VITE_PATH:u}={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"coffee11",BASE_URL:"/11th_street_cafe/",MODE:"production",DEV:!1,PROD:!0},w=i("products",{state:()=>({products:[],categories:["全部商品","淺焙咖啡","中焙咖啡","深焙咖啡","周邊商品"],filterCategory:"全部商品"}),actions:{getProducts(){e.isLoading=!0,c.get(`${g}/api/${u}/products/all`).then(o=>{e.isLoading=!1;const{products:t}=o.data;this.products=t,d.tempProducts(this.products)}).catch(o=>{var s,l;e.isLoading=!1;const t=((l=(s=o.response)==null?void 0:s.data)==null?void 0:l.message)||"資料取得失敗，稍後在試";r.fire({title:`${t}`,icon:"error"})})},changeCategory(o){this.filterCategory=o}},getters:{filterProducts:o=>o.products.filter(s=>o.filterCategory==="全部商品"?o.products:s.category===o.filterCategory)}});export{f,w as p};
