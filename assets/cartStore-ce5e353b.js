import{T as c}from"./Toast-c391ac49.js";import{g as p,h as n}from"./index-362d0565.js";import{s as h}from"./statusStore-12ca3353.js";const s=h(),{VITE_API:d,VITE_PATH:g}={VITE_API:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"coffee11",BASE_URL:"/11th_street_cafe/",MODE:"production",DEV:!1,PROD:!0},$=p("cart",{state:()=>({cart:{},coupon_code:""}),actions:{getCarts(){s.isLoading=!0,n.get(`${d}/api/${g}/cart`).then(t=>{const{data:a}=t.data;s.isLoading=!1,this.cart=a}).catch(t=>{var o,e;s.isLoading=!1;const a=((e=(o=t.response)==null?void 0:o.data)==null?void 0:e.message)||"資料錯誤";c.fire({title:`${a}`,icon:"error"})})},addToCart(t,a=1){s.loadingItem=t;const o={product_id:t,qty:a};n.post(`${d}/api/${g}/cart`,{data:o}).then(e=>{const{message:r}=e.data;s.loadingItem="",c.fire({title:`${r}`,icon:"success"}),this.getCarts()}).catch(e=>{var i,l;s.loadingItem="";const r=((l=(i=e.response)==null?void 0:i.data)==null?void 0:l.message)||"資料錯誤";c.fire({title:`${r}`,icon:"error"})})},updateCart(t,a){const o={product_id:t.product_id,qty:a};s.loadingItem=t.id,n.put(`${d}/api/${g}/cart/${t.id}`,{data:o}).then(e=>{const{message:r}=e.data;s.loadingItem="",c.fire({title:`${r}`,icon:"success"}),this.getCarts()}).catch(e=>{var i,l;s.loadingItem="";const r=((l=(i=e.response)==null?void 0:i.data)==null?void 0:l.message)||"資料錯誤";c.fire({title:`${r}`,icon:"error"})})},removeCartItem(t){s.loadingItem=t,n.delete(`${d}/api/${g}/cart/${t}`).then(a=>{const{message:o}=a.data;s.loadingItem="",c.fire({title:`${o}`,icon:"success"}),this.getCarts()}).catch(a=>{var e,r;s.loadingItem="";const o=((r=(e=a.response)==null?void 0:e.data)==null?void 0:r.message)||"資料錯誤";c.fire({title:`${o}`,icon:"error"})})},deleteAllCarts(){s.isProcessing=!0,n.delete(`${d}/api/${g}/carts`).then(t=>{const{message:a}=t.data;s.isProcessing=!1,c.fire({title:`${a}`,icon:"success"}),this.getCarts()}).catch(t=>{var o,e;const a=((e=(o=t.response)==null?void 0:o.data)==null?void 0:e.message)||"資料錯誤";s.isProcessing=!1,c.fire({title:`${a}`,icon:"error"})})},addCouponCode(t){this.coupon_code=t;const a={code:this.coupon_code};s.isProcessing=!0,n.post(`${d}/api/${g}/coupon`,{data:a}).then(o=>{s.isProcessing=!1;const{message:e}=o.data;c.fire({title:`${e}`,icon:"success"}),this.getCarts(),this.coupon_code=""}).catch(o=>{var r,i;const e=((i=(r=o.response)==null?void 0:r.data)==null?void 0:i.message)||"資料錯誤";s.isProcessing=!1,c.fire({title:`${e}`,icon:"error"})})}}});export{$ as c};
